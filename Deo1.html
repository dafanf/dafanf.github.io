<!DOCTYPE html>
<!-- Bootstrap CSS -->
<link rel="shortcut icon" href="assets/images/jago-favicon.png" type="image/x-icon" />

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
<!-- Memuat file JavaScript Bootstrap -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/js/bootstrap.bundle.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.all.min.js"></script>

<html lang="english">
  <head>
    <title>Transfer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta property="twitter:card" content="summary_large_image" />

    <style data-tag="reset-style-sheet">
      html {
        line-height: 1.15;
      }
      body {
        margin: 0;
      }
      * {
        box-sizing: border-box;
        border-width: 0;
        border-style: solid;
      }
      p,
      li,
      ul,
      pre,
      div,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      figure,
      blockquote,
      figcaption {
        margin: 0;
        padding: 0;
      }
      button {
        background-color: transparent;
      }
      button,
      input,
      optgroup,
      select,
      textarea {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }
      button,
      select {
        text-transform: none;
      }
      button,
      [type="button"],
      [type="reset"],
      [type="submit"] {
        -webkit-appearance: button;
      }
      button::-moz-focus-inner,
      [type="button"]::-moz-focus-inner,
      [type="reset"]::-moz-focus-inner,
      [type="submit"]::-moz-focus-inner {
        border-style: none;
        padding: 0;
      }
      button:-moz-focus,
      [type="button"]:-moz-focus,
      [type="reset"]:-moz-focus,
      [type="submit"]:-moz-focus {
        outline: 1px dotted ButtonText;
      }
      a {
        color: inherit;
        text-decoration: inherit;
      }
      input {
        padding: 2px 4px;
      }
      img {
        display: block;
      }
      html {
        scroll-behavior: smooth;
      }
    </style>
    <style data-tag="default-style-sheet">
      html {
        font-family: Inter;
        font-size: 16px;
      }

      body {
        font-weight: 400;
        font-style: normal;
        text-decoration: none;
        text-transform: none;
        letter-spacing: normal;
        line-height: 1.15;
        color: var(--dl-color-gray-black);
        background-color: var(--dl-color-gray-white);
      }
    </style>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" data-tag="font" />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div>
      <link href="./Deo1.css" rel="stylesheet" />

      <div class="pesan-limit-pengeluaran-container">
        <div class="pesan-limit-pengeluaran-pesan-limit-pengeluaran">
          <div class="pesan-limit-pengeluaran-title">
            <button id="my-button" type="button" class="btn-close" aria-label="Close"></button>
            <!-- <img alt="Cross9427" src="public/playground_assets/cross9427-p03o-200h.png" class="pesan-limit-pengeluaran-cross" /> -->
            <span class="pesan-limit-pengeluaran-text">
              <span>Transfer</span>
            </span>
            <!-- Add a script tag to your HTML page to add event listener -->
            <script>
              const myButton = document.getElementById("my-button");

              // Add an event listener to the button
              myButton.addEventListener("click", function () {
                // Navigate to index.html page
                window.location.href = "Dafa1.html";
              });
            </script>
          </div>
          <div class="pesan-limit-pengeluaran-profile">
            <img alt="Ellips9428" src="public/playground_assets/ellips9428-c2jq-200h.png" class="pesan-limit-pengeluaran-ellips" />
            <span class="pesan-limit-pengeluaran-text02"><span>DF</span></span>
            <span class="pesan-limit-pengeluaran-text04">
              <span>Dafa Nurul Fauziansyah</span>
            </span>
            <span class="pesan-limit-pengeluaran-text06">
              <span>Bank Jago | 1024 5673 4853</span>
            </span>
          </div>
          <div class="pesan-limit-pengeluaran-i-phonestatusbarupper">
            <div class="pesan-limit-pengeluaran-notch"></div>
            <div class="pesan-limit-pengeluaran-status-icons">
              <img alt="NetworkSignalLightI942" src="public/playground_assets/networksignallighti942-q7pm.svg" class="pesan-limit-pengeluaran-network-signal-light" />
              <img alt="WiFiSignalLightI942" src="public/playground_assets/wifisignallighti942-1aqy.svg" class="pesan-limit-pengeluaran-wi-fi-signal-light" />
              <div class="pesan-limit-pengeluaran-battery-light">
                <img alt="Rectangle23I942" src="public/playground_assets/rectangle23i942-zfsr.svg" class="pesan-limit-pengeluaran-rectangle23" />
                <img alt="Rectangle21StrokeI942" src="public/playground_assets/rectangle21strokei942-fu1.svg" class="pesan-limit-pengeluaran-rectangle2-stroke" />
                <img alt="Rectangle20I942" src="public/playground_assets/rectangle20i942-uo0o-200h.png" class="pesan-limit-pengeluaran-rectangle20" />
              </div>
            </div>
            <div class="pesan-limit-pengeluaran-indicator"></div>
            <div class="pesan-limit-pengeluaran-time-light">
              <img alt="SVG941I942" src="public/playground_assets/svg941i942-ai4k.svg" class="pesan-limit-pengeluaran-svg941" />
            </div>
          </div>
          <div class="pesan-limit-pengeluaran-saldo">
            <form>
              <div class="mb-3">
                <input class="form-control form-control-lg" type="text" id="rupiah" placeholder="Rp0" aria-label=".form-control-lg example" />
                <p id="warning" style="color: red"></p>
                <script type="text/javascript">
                  var rupiah = document.getElementById("rupiah");
                  rupiah.addEventListener("keyup", function (e) {
                    // tambahkan 'Rp.' pada saat form di ketik
                    // gunakan fungsi formatRupiah() untuk mengubah angka yang di ketik menjadi format angka
                    rupiah.value = formatRupiah(this.value, "Rp");

                    // tambahkan kondisi untuk menampilkan pesan warning jika nilai kurang dari 10000
                    if (parseInt(this.value.replace(/\D/g, "")) < 10000) {
                      document.getElementById("warning").innerHTML = "Jumlah minimum adalah Rp10.000";
                    } else {
                      document.getElementById("warning").innerHTML = "";
                    }
                    // tambahkan kondisi untuk menampilkan pesan warning jika nilai melebihi kantong pilihan
                    let kantongSelect = document.getElementById("kantong-select");
                    let selectedOptionValue = parseInt(kantongSelect.value.replace(/\D/g, ""));
                    let rupiahValue = parseInt(this.value.replace(/\D/g, ""));
                    if (rupiahValue > selectedOptionValue) {
                      document.getElementById("warning").innerHTML = "Saldo tidak mencukupi";
                    }
                  });

                  /* Fungsi formatRupiah */
                  function formatRupiah(angka, prefix) {
                    var number_string = angka.replace(/[^,\d]/g, "").toString(),
                      split = number_string.split(","),
                      sisa = split[0].length % 3,
                      rupiah = split[0].substr(0, sisa),
                      ribuan = split[0].substr(sisa).match(/\d{3}/gi);

                    // tambahkan titik jika yang di input sudah menjadi angka ribuan
                    if (ribuan) {
                      separator = sisa ? "." : "";
                      rupiah += separator + ribuan.join(".");
                    }

                    rupiah = split[1] != undefined ? rupiah + "," + split[1] : rupiah;
                    return prefix == undefined ? rupiah : rupiah ? "Rp" + rupiah : "";
                  }
                </script>
              </div>
            </form>
            <span class="pesan-limit-pengeluaran-text12">
              <span>Dari</span>
            </span>
            <span class="pesan-limit-pengeluaran-text14">
              <span id="selected-option-text"></span>
            </span>
            <span class="pesan-limit-pengeluaran-text16">
              <select class="form-select pesan-limit-pengeluaran-text116" aria-label="Default select example" id="kantong-select">
                <option selected>Pilih Kantong</option>
                <option value="Rp3.000.000">Kantong Utama</option>
                <option value="Rp100.000">Kantong Jajan</option>
                <option value="Rp200.000">Kantong Lain</option>
              </select>
            </span>

            <script>
              let kantongSelect = document.getElementById("kantong-select");
              let selectedOptionText = document.getElementById("selected-option-text");

              kantongSelect.addEventListener("change", function () {
                selectedOptionText.innerText = kantongSelect.value;
              });
            </script>
          </div>
          <div class="d-grid gap-2 col-12 mx-auto pesan-limit-pengeluaran-button-lanjut">
            <!-- <button class="btn btn-lanjut" data-bs-toggle="modal" data-bs-target="#staticBackdrop" type="button"> -->
            <button class="btn btn-lanjut" data-bs-toggle="modal" onclick="alert()" type="button">
              <span class="pesan-limit-pengeluaran-text18">
                <span>Lanjut</span>
              </span>
              <script>
                function alert() {
                  var rupiah = $("#rupiah").val();
                  var kantong = $("#kantong-select").val();

                  if (rupiah != "") {
                    var rupiahAngka = parseInt(rupiah.replace(/\D/g, ""));
                    rupiahAngka = rupiahAngka + rupiahAngka * 0.1;
                    var formattedRupiah = "Rp" + rupiahAngka.toLocaleString("id-ID");
                    var kantongValue = kantong;

                    // Menampilkan nilai field bulan dan rupiah di dalam modal
                    document.getElementById("rupiahValue").textContent = formattedRupiah;

                    // Mengaktifkan modal
                    var myModal = new bootstrap.Modal(document.getElementById("staticBackdrop"));
                    myModal.show();
                  } else if (rupiah.length == "") {
                    Swal.fire({
                      type: "warning",
                      title: "Oops...",
                      text: "Saldo Wajib Diisi !",
                    });
                  } else if (kantong.length == "") {
                    Swal.fire({
                      type: "warning",
                      title: "Oops...",
                      text: "Kantong Wajib Diisi !",
                    });
                  }
                }
              </script>
            </button>
          </div>

          <!-- Modal -->
          <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="staticBackdropLabel">Limit Pengeluaran</h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">Kamu mendekati limit pengeluaran pada bulan April. Batas pengeluaran kamu pada bulan April adalah <span id="rupiahValue"></span>. Mau tetap melakukan transaksi ini?</div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-lanjut" data-bs-dismiss="modal">Batal</button>
                  <button type="button" class="btn lanjut-modal" onclick="berhasil()">Lanjut</button>
                  <script>
                    function berhasil() {
                      var bulan = $("#bulan").val();
                      var rupiah = $("#rupiah").val();

                      if (bulan != "" && rupiah != "") {
                        Swal.fire({
                          type: "success",
                          title: "yupsss!",
                          text: "berhasil tersimpan!",
                          timer: 1400,
                        }).then(() => {
                          setTimeout(() => {
                            window.location.href = "Dafa1.html";
                          }, 0);
                        });
                      }
                    }
                  </script>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
